{"remainingRequest":"/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/src/components/stream.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/src/components/stream.vue","mtime":1598867441174},{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiY2FtZXJhIiwKICBwcm9wczogewogICAgc2VsZWN0ZWRFbGVtZW50czogTnVtYmVyCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBpbml0aWFsaXplIFdlYmNhbSBMaXZlc3RyZWFtCiAgICBpbml0VmlkZW8oKSB7CiAgICAgIGlmICgKICAgICAgICAibWVkaWFEZXZpY2VzIiBpbiBuYXZpZ2F0b3IgJiYKICAgICAgICAiZ2V0VXNlck1lZGlhIiBpbiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzCiAgICAgICkgewogICAgICAgIC8vIHNldCByYXRpbyB0byAxNjo5CiAgICAgICAgbGV0IGNvbnN0cmFpbnRzID0gewogICAgICAgICAgdmlkZW86IHsKICAgICAgICAgICAgd2lkdGg6IHsKICAgICAgICAgICAgICBtaW46IDY0MCwKICAgICAgICAgICAgICBpZGVhbDogMTI4MCwKICAgICAgICAgICAgICBtYXg6IDE5MjAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGVpZ2h0OiB7CiAgICAgICAgICAgICAgbWluOiAzNjAsCiAgICAgICAgICAgICAgaWRlYWw6IDcyMCwKICAgICAgICAgICAgICBtYXg6IDEwODAKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4oc3RyZWFtID0+IHsKICAgICAgICAgIGNvbnN0IHZpZGVvUGxheWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigidmlkZW8iKTsKICAgICAgICAgIHZpZGVvUGxheWVyLnNyY09iamVjdCA9IHN0cmVhbTsKICAgICAgICAgIHZpZGVvUGxheWVyLnBsYXkoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgiS2VpbiBMaXZlc3RyZWFtIHZlcmbDvGdiYXIgYWt0dWVsbC4uLiIpOwogICAgICB9CiAgICB9LAogICAgLyoKICAgICAqU2NyZWVuc2hvdCBvZiBMaXZlc3RyZWFtCiAgICAgKi8KICAgIHRha2VQaWN0dXJlKCkgewogICAgICAvLyBwaWNrIGNhbnZhcyBlbGVtZW50IHRvICJkcmF3IiBzY3JlZW5zaG90IG9uCiAgICAgIGNvbnN0IHBpYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImNhbnZhcyIpOwogICAgICBjb25zdCBjdHggPSBwaWMuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgLy8gc2V0dGluZyBwaWN0dXJlIHF1YWxpdHkgYW5kIGxhbmRzY2FwZQogICAgICBsZXQgcmF0aW8gPSB3aW5kb3cuaW5uZXJIZWlnaHQgPCB3aW5kb3cuaW5uZXJXaWR0aCA/IDE2IC8gOSA6IDkgLyAxNjsKICAgICAgLy8gc2V0IHdpbmRvdyB3aWR0aCB0byBtYXguIG9mIDEyODBweAogICAgICBwaWMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCA8IDEyODAgPyB3aW5kb3cuaW5uZXJXaWR0aCA6IDEyODA7CiAgICAgIHBpYy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIHJhdGlvOwogICAgICAvLyBzY3JlZW5zaG90IHZhcmlhYmxlIGRyYXdzIGltYWdlCiAgICAgIHZhciBzY3JlZW5zaG90ID0gY3R4LmRyYXdJbWFnZSgKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJ2aWRlbyIpLAogICAgICAgIDAsCiAgICAgICAgMCwKICAgICAgICBwaWMud2lkdGgsCiAgICAgICAgcGljLmhlaWdodAogICAgICApOwogICAgICAvLyAvLyBhcnJheSB3aGVyZSBhbGwgc2NyZWVuc2hvdHMgc2hhbGwgYmUgc3RvcmVkCiAgICAgIC8vIHZhciBpbWFnZXMgPSBbXTsKICAgICAgLy8gdmFyIHNjcmVlbnNob3RDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ2FsbGVyeUNhbnZhcyIpOwogICAgICAvLyBmb3IgKHZhciBpID0gMDsgaSA8PSBpbWFnZXMubGVuZ3RoOyBpKyspIHsKICAgICAgLy8gICAgIGltYWdlcy5wdXNoKHNjcmVlbnNob3RbaV0pOwogICAgICAvLyAgICAgdmFyIHNjcmVlbnNob3RzRGlzcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIklNRyIpOwogICAgICAvLyAgICAgc2NyZWVuc2hvdHNEaXNwbGF5LnNldEF0dHJpYnV0ZSgic3JjIiwgaW1hZ2VzW2ldKTsKICAgICAgLy8gICAgIHNjcmVlbnNob3RDYW52YXMuYXBwZW5kQ2hpbGQoc2NyZWVuc2hvdHNEaXNwbGF5KTsKICAgICAgLy8gfQogICAgICAvLyBhcnJheSB3aGVyZSBhbGwgc2NyZWVuc2hvdHMgc2hhbGwgYmUgc3RvcmVkCiAgICAgIC8vIHZhciBpbWFnZXMgPSBbXTsKICAgICAgLy8gdmFyIHNjcmVlbnNob3RDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ2FsbGVyeUNhbnZhcyIpOwogICAgICAvLyBmb3IgKHZhciBpID0gMDsgaSA8PSBpbWFnZXMubGVuZ3RoOyBpKyspIHsKICAgICAgLy8gICAgIGltYWdlcy5wdXNoKHNjcmVlbnNob3RbaV0pOwogICAgICAvLyAgICAgdmFyIHNjcmVlbnNob3RzRGlzcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIkNBTlZBUyIpOwogICAgICAvLyAgICAgc2NyZWVuc2hvdHNEaXNwbGF5LnNldEF0dHJpYnV0ZSgic3JjIiwgaW1hZ2VzW2ldKTsKICAgICAgLy8gICAgIHNjcmVlbnNob3RDYW52YXMuYXBwZW5kQ2hpbGQoc2NyZWVuc2hvdHNEaXNwbGF5KTsKICAgICAgLy8gfQogICAgICAvLyBhcnJheSB3aGVyZSBhbGwgc2NyZWVuc2hvdHMgc2hhbGwgYmUgc3RvcmVkCiAgICAgIHZhciBpbWFnZXMgPSBuZXcgQXJyYXkoKTsKICAgICAgdmFyIHNjcmVlbnNob3RDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ2FsbGVyeUNhbnZhcyIpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBpbWFnZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpbWFnZXNbaV0gPSBuZXcgSW1hZ2UoKTsKICAgICAgICBpbWFnZXNbaV0uc3JjID0gc2NyZWVuc2hvdFtpXTsKICAgICAgICB2YXIgc2NyZWVuc2hvdHNEaXNwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiSU1HIik7CiAgICAgICAgc2NyZWVuc2hvdHNEaXNwbGF5LnNldEF0dHJpYnV0ZSgic3JjIiwgaW1hZ2VzW2ldLnNyYyk7CiAgICAgICAgc2NyZWVuc2hvdENhbnZhcy5hcHBlbmRDaGlsZChzY3JlZW5zaG90c0Rpc3BsYXkpOwogICAgICB9CiAgICB9CiAgfSwKICAvL1dlYmNhbSBzaGFsbCBiZSBpbml0aWFsaXplZCB3aGVuIExpdmVzdHJlYW0gQnV0dG9uIGlzIHNlbGVjdGVkCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdFZpZGVvKCk7CiAgfSwKICBjb21wdXRlZDogewogICAgc3R5bGVPYmplY3Q6IGZ1bmN0aW9uKCkgewogICAgICBpZiAodGhpcy5zZWxlY3RlZEVsZW1lbnRzID09PSAxKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHdpZHRoOiAiNTV2dyIsCiAgICAgICAgICBoZWlnaHQ6ICIyNXZoIiwKICAgICAgICAgIHBhZGRpbmc6ICIyNXB4IiwKICAgICAgICAgICJib3gtc2l6aW5nIjogImJvcmRlci1ib3g7IgogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHdpZHRoOiAiMzJ2dyIsCiAgICAgICAgICBoZWlnaHQ6ICIyNXZoIiwKICAgICAgICAgIHBhZGRpbmc6ICIyNXB4IiwKICAgICAgICAgICJib3gtc2l6aW5nIjogImJvcmRlci1ib3g7IgogICAgICAgIH07CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["stream.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"stream.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"camera\" v-bind:style=\"styleObject\">\n    <video autoplay controls class=\"feed\">\n      <p>Aktuell läuft kein Livestream.</p>\n    </video>\n    <button\n      class=\"btn btn-dark btn-lg\"\n      style=\"margin-top: 7px; margin-bottom: 7px;\"\n      @click=\"this.takePicture\"\n    >\n      <i class=\"fa fa-camera\"></i>\n    </button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"camera\",\n  props: {\n    selectedElements: Number\n  },\n  methods: {\n    // initialize Webcam Livestream\n    initVideo() {\n      if (\n        \"mediaDevices\" in navigator &&\n        \"getUserMedia\" in navigator.mediaDevices\n      ) {\n        // set ratio to 16:9\n        let constraints = {\n          video: {\n            width: {\n              min: 640,\n              ideal: 1280,\n              max: 1920\n            },\n            height: {\n              min: 360,\n              ideal: 720,\n              max: 1080\n            }\n          }\n        };\n        navigator.mediaDevices.getUserMedia(constraints).then(stream => {\n          const videoPlayer = document.querySelector(\"video\");\n          videoPlayer.srcObject = stream;\n          videoPlayer.play();\n        });\n      } else {\n        alert(\"Kein Livestream verfügbar aktuell...\");\n      }\n    },\n    /*\n     *Screenshot of Livestream\n     */\n    takePicture() {\n      // pick canvas element to \"draw\" screenshot on\n      const pic = document.querySelector(\"canvas\");\n      const ctx = pic.getContext(\"2d\");\n      // setting picture quality and landscape\n      let ratio = window.innerHeight < window.innerWidth ? 16 / 9 : 9 / 16;\n      // set window width to max. of 1280px\n      pic.width = window.innerWidth < 1280 ? window.innerWidth : 1280;\n      pic.height = window.innerWidth / ratio;\n      // screenshot variable draws image\n      var screenshot = ctx.drawImage(\n        document.querySelector(\"video\"),\n        0,\n        0,\n        pic.width,\n        pic.height\n      );\n      // // array where all screenshots shall be stored\n      // var images = [];\n      // var screenshotCanvas = document.getElementById(\"galleryCanvas\");\n      // for (var i = 0; i <= images.length; i++) {\n      //     images.push(screenshot[i]);\n      //     var screenshotsDisplay = document.createElement(\"IMG\");\n      //     screenshotsDisplay.setAttribute(\"src\", images[i]);\n      //     screenshotCanvas.appendChild(screenshotsDisplay);\n      // }\n      // array where all screenshots shall be stored\n      // var images = [];\n      // var screenshotCanvas = document.getElementById(\"galleryCanvas\");\n      // for (var i = 0; i <= images.length; i++) {\n      //     images.push(screenshot[i]);\n      //     var screenshotsDisplay = document.createElement(\"CANVAS\");\n      //     screenshotsDisplay.setAttribute(\"src\", images[i]);\n      //     screenshotCanvas.appendChild(screenshotsDisplay);\n      // }\n      // array where all screenshots shall be stored\n      var images = new Array();\n      var screenshotCanvas = document.getElementById(\"galleryCanvas\");\n      for (var i = 0; i <= images.length; i++) {\n        images[i] = new Image();\n        images[i].src = screenshot[i];\n        var screenshotsDisplay = document.createElement(\"IMG\");\n        screenshotsDisplay.setAttribute(\"src\", images[i].src);\n        screenshotCanvas.appendChild(screenshotsDisplay);\n      }\n    }\n  },\n  //Webcam shall be initialized when Livestream Button is selected\n  mounted() {\n    this.initVideo();\n  },\n  computed: {\n    styleObject: function() {\n      if (this.selectedElements === 1) {\n        return {\n          width: \"55vw\",\n          height: \"25vh\",\n          padding: \"25px\",\n          \"box-sizing\": \"border-box;\"\n        };\n      } else {\n        return {\n          width: \"32vw\",\n          height: \"25vh\",\n          padding: \"25px\",\n          \"box-sizing\": \"border-box;\"\n        };\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.camera {\n  width: 65vw;\n  height: 25vh;\n  padding: 25px;\n  box-sizing: border-box;\n}\n\n.feed {\n  display: block;\n  width: 100%;\n  max-width: 1280px;\n  margin: 0 auto;\n  background-color: #171717;\n}\n</style>\n"]}]}