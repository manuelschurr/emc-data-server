{"remainingRequest":"/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/src/components/stream.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/src/components/stream.vue","mtime":1599127140886},{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/trauma-room/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJjYW1lcmEiLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2aWRlbzoge30sCiAgICAgICAgICAgIGNhbnZhczoge30sCiAgICAgICAgICAgIGNhcHR1cmVzOiBbXSwKICAgICAgICB9OwogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5pbml0VmlkZW8oKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgaW5pdFZpZGVvKCkgewogICAgICAgICAgICB0aGlzLnZpZGVvID0gdGhpcy4kcmVmcy52aWRlbzsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgIm1lZGlhRGV2aWNlcyIgaW4gbmF2aWdhdG9yICYmCiAgICAgICAgICAgICAgICAiZ2V0VXNlck1lZGlhIiBpbiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgLy8gc2V0IHJhdGlvIHRvIDE2OjkKICAgICAgICAgICAgICAgIGxldCBjb25zdHJhaW50cyA9IHsKICAgICAgICAgICAgICAgICAgICB2aWRlbzogewogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiA2NDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGVhbDogMTI4MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogMTkyMCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW46IDM2MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkZWFsOiA3MjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg6IDEwODAsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzCiAgICAgICAgICAgICAgICAgICAgLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykKICAgICAgICAgICAgICAgICAgICAudGhlbigoc3RyZWFtKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZGVvUGxheWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigidmlkZW8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9QbGF5ZXIuc3JjT2JqZWN0ID0gc3RyZWFtOwogICAgICAgICAgICAgICAgICAgICAgICB2aWRlb1BsYXllci5wbGF5KCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhbGVydCgiS2VpbiBMaXZlc3RyZWFtIHZlcmbDvGdiYXIgYWt0dWVsbC4uLiIpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjYXB0dXJlKCkgewogICAgICAgICAgICAvLyB0aGlzLmNhbnZhcyA9IHRoaXMuJHJlZnMuY2FudmFzOwogICAgICAgICAgICAvL3RoaXMuY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiY2FudmFzIik7CiAgICAgICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImdhbGxlcnlDYW52YXMiKTsKICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZSh0aGlzLnZpZGVvLCAwLCAwLCA2NDAsIDQ4MCk7CiAgICAgICAgICAgIHRoaXMuY2FwdHVyZXMucHVzaCh0aGlzLmNhbnZhcy50b0RhdGFVUkwoImltYWdlL3BuZyIpKTsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgic2VsZWN0U2NyZWVuc2hvdHMiLCB0aGlzLmNhcHR1cmVzKTsKICAgICAgICB9LAogICAgfSwKfTsK"},{"version":3,"sources":["stream.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"stream.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div id=\"app\">\n        <div>\n            <video ref=\"video\" id=\"video\" width=\"1024\" height=\"576\" autoplay></video>\n        </div>\n        <div>\n            <button class=\"btn btn-dark btn-lg\" style=\"margin-top: 5px; margin-bottom: 7px\" id=\"snap\" v-on:click=\"capture()\">\n                <i class=\"fa fa-camera\"></i>\n            </button>\n        </div>\n        <canvas ref=\"canvas\" id=\"canvas\" width=\"640\" height=\"480\"></canvas>\n        <ul>\n            <li v-for=\"c in captures\" :key=\"c.id\">\n                <img v-bind:src=\"c\" height=\"50\" />\n            </li>\n        </ul>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"camera\",\n    data() {\n        return {\n            video: {},\n            canvas: {},\n            captures: [],\n        };\n    },\n    mounted() {\n        this.initVideo();\n    },\n    methods: {\n        initVideo() {\n            this.video = this.$refs.video;\n            if (\n                \"mediaDevices\" in navigator &&\n                \"getUserMedia\" in navigator.mediaDevices\n            ) {\n                // set ratio to 16:9\n                let constraints = {\n                    video: {\n                        width: {\n                            min: 640,\n                            ideal: 1280,\n                            max: 1920,\n                        },\n                        height: {\n                            min: 360,\n                            ideal: 720,\n                            max: 1080,\n                        },\n                    },\n                };\n                navigator.mediaDevices\n                    .getUserMedia(constraints)\n                    .then((stream) => {\n                        const videoPlayer = document.querySelector(\"video\");\n                        videoPlayer.srcObject = stream;\n                        videoPlayer.play();\n                    });\n            } else {\n                alert(\"Kein Livestream verf√ºgbar aktuell...\");\n            }\n        },\n        capture() {\n            // this.canvas = this.$refs.canvas;\n            //this.canvas = document.querySelector(\"canvas\");\n            this.canvas = document.getElementById(\"galleryCanvas\");\n            var context = this.canvas.getContext(\"2d\");\n            context.drawImage(this.video, 0, 0, 640, 480);\n            this.captures.push(this.canvas.toDataURL(\"image/png\"));\n            this.$root.$emit(\"selectScreenshots\", this.captures);\n        },\n    },\n};\n</script>\n\n<style scoped>\n#app {\n    text-align: center;\n    color: #2c3e50;\n    margin-top: 60px;\n}\n#video {\n    background-color: #000000;\n}\n#canvas {\n    display: none;\n}\nli {\n    display: inline;\n    padding: 5px;\n}\n</style>"]}]}