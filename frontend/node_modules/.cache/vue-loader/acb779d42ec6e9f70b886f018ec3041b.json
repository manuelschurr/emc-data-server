{"remainingRequest":"/Users/marcguldner/GitHub/emc-data-server/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/marcguldner/GitHub/emc-data-server/frontend/src/components/rtwSelection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/src/components/rtwSelection.vue","mtime":1599666976243},{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marcguldner/GitHub/emc-data-server/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCnZhciBheGlvcyA9IHJlcXVpcmUoImF4aW9zIik7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJ0d1NlbGVjdGlvbiIsCiAgcHJvcHM6IHsKICAgIHNlbGVjdFJUVzogRnVuY3Rpb24sCiAgICBhY3RpdmVBbWJ1bGFuY2VzOiBBcnJheSwKICAgIGluYWN0aXZlQW1idWxhbmNlczogQXJyYXksCiAgICBhcGlLZXlPcGVuUm91dGU6IFN0cmluZwogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIGFycml2YWxUaW1lczogW10sCiAgICBhbWJ1bGFuY2VzV2l0aEVUQXM6IFtdLAogICAgYW1idWxhbmNlc1dpdGhOb0VUQTogW10sCiAgICBydHdMb2NhdGlvbnM6IFtgWyR7OC40ODcyNTV9LCAkezQ5LjQ5MjQyN31dYF0sCiAgICBzdGF0ZU1lc3NhZ2U6ICJCZXJlY2huZSBnZXNjaMOkdHp0ZSBBbmt1bmZ0c3plaXQiLAogICAgb3BlblJvdXRlRXJyb3I6IGZhbHNlLAogICAgYXBpQnV0dG9uSXNEaXNhYmxlZDogdHJ1ZQogIH0pLAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZUFwaUtleTogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBjb250ZXh0ID0gdGhpczsKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBtZXRob2Q6ICJwdXQiLAogICAgICAgIC8vVE8gQ0hBTkdFCiAgICAgICAgdXJsOiAiaHR0cHM6Ly8xMzQuMTU1LjQ4LjIxMTozMDAwL2FwaUtleS91cGRhdGUvMSIsCiAgICAgICAgaGVhZGVyczoge30sCiAgICAgICAgZGF0YTogewogICAgICAgICAgYXBpS2V5SWQ6IDEsCiAgICAgICAgICB2YWx1ZTogdGhpcy5hcGlLZXlPcGVuUm91dGUKICAgICAgICB9CiAgICAgIH07CgogICAgICBheGlvcyhjb25maWcpCiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnRleHQub3BlblJvdXRlRXJyb3IgPSBmYWxzZTsKICAgICAgICAgIGNvbnRleHQuZ2V0R25zc0RhdGEoKTsKICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEpKTsKICAgICAgICAgIGNvbnRleHQuJHJvb3QuJGVtaXQoImFwaVRva2VuIiwgY29udGV4dC5hcGlLZXlPcGVuUm91dGUpOwogICAgICAgICAgY29udGV4dC4kcm9vdC4kZW1pdCgidG9rZW5TdGF0dXMiLCBjb250ZXh0Lm9wZW5Sb3V0ZUVycm9yKTsKICAgICAgICAgIGNvbnRleHQuJGZvcmNlVXBkYXRlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0QXBpS2V5OiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGNvbnRleHQgPSB0aGlzOwogICAgICB2YXIgY29uZmlnID0gewogICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgLy9UTyBDSEFOR0UKICAgICAgICB1cmw6ICJodHRwczovLzEzNC4xNTUuNDguMjExOjMwMDAvYXBpS2V5L2ZpbmRBbGwiLAogICAgICAgIGhlYWRlcnM6IHt9CiAgICAgIH07CgogICAgICBheGlvcyhjb25maWcpCiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnRleHQuYXBpS2V5T3BlblJvdXRlID0gcmVzcG9uc2UuZGF0YS5kYXRhWzBdLnZhbHVlOwogICAgICAgICAgY29udGV4dC4kcm9vdC4kZW1pdCgiYXBpVG9rZW4iLCBjb250ZXh0LmFwaUtleU9wZW5Sb3V0ZSk7CiAgICAgICAgICBjb250ZXh0LmdldEduc3NEYXRhKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBjb21wdXRlRVRBOiBmdW5jdGlvbihjdXJyZW50UnR3KSB7CiAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgIGlmICh0aGlzLnJ0d0xvY2F0aW9ucy5sZW5ndGggPiAxKSB7CiAgICAgICAgcmVxdWVzdC5vcGVuKAogICAgICAgICAgIlBPU1QiLAogICAgICAgICAgImh0dHBzOi8vYXBpLm9wZW5yb3V0ZXNlcnZpY2Uub3JnL3YyL21hdHJpeC9kcml2aW5nLWNhciIKICAgICAgICApOwoKICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoCiAgICAgICAgICAiQWNjZXB0IiwKICAgICAgICAgICJhcHBsaWNhdGlvbi9qc29uLCBhcHBsaWNhdGlvbi9nZW8ranNvbiwgYXBwbGljYXRpb24vZ3B4K3htbCwgaW1nL3BuZzsgY2hhcnNldD11dGYtOCIKICAgICAgICApOwogICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoIkF1dGhvcml6YXRpb24iLCB0aGlzLmFwaUtleU9wZW5Sb3V0ZSk7CiAgICAgICAgbGV0IGNvbnRleHQgPSB0aGlzOwogICAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlID09PSA0KSB7CiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgY3VycmVudFJ0dy5ldGEgPSBjb250ZXh0LnNlY1RvVGltZSgKICAgICAgICAgICAgICAgIEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpLmR1cmF0aW9uc1sxXVswXQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgY29udGV4dC5zdGF0ZU1lc3NhZ2UgPSAiRVRBIHd1cmRlIGJlcmVjaG5ldCI7CiAgICAgICAgICAgICAgLy8gQWZ0ZXIgY29tcHV0aW5nIHRoZSBFVEEsIHRoZSBwYXRpZW50IG1pc2NlbGxhbmVvdXMgaW5mb3JtYXRpb25zICg1MCBmaXJzdCBjaGFyYWN0ZXJzIG9mIHRoZSBtaXNjZWxsYW5lb3VzKQogICAgICAgICAgICAgIC8vIGFuZCBBQkNERSBTY2hlbWEgaXMgZmV0Y2hlZCBmcm9tIHRoZSBzZXJ2ZXIuCiAgICAgICAgICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgICB1cmw6CiAgICAgICAgICAgICAgICAgICJodHRwczovLzEzNC4xNTUuNDguMjExOjMwMDAvcGF0aWVudC9maW5kQnlBbWJ1bGFuY2VJZC8iICsKICAgICAgICAgICAgICAgICAgY3VycmVudFJ0dy5hbWJ1bGFuY2VJZAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdmFyIHBhdGllbnREYXRhID0ge307CiAgICAgICAgICAgICAgYXhpb3MoY29uZmlnKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXNDb2RlID09PSAiMTAwMDAiKSB7CiAgICAgICAgICAgICAgICAgICAgcGF0aWVudERhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICBwYXRpZW50SWQ6IHJlc3BvbnNlLmRhdGEuZGF0YS5wYXRpZW50SWQsCiAgICAgICAgICAgICAgICAgICAgICBtaXNjZWxsYW5lb3VzOiByZXNwb25zZS5kYXRhLmRhdGEubWlzY2VsbGFuZW91cy5zbGljZSgKICAgICAgICAgICAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgICAgICAgICAgNTAKICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICBhYmNkZV9zY2hlbWE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgQTogcmVzcG9uc2UuZGF0YS5kYXRhLkFJc1NlbGVjdGVkLAogICAgICAgICAgICAgICAgICAgICAgICBCOiByZXNwb25zZS5kYXRhLmRhdGEuQklzU2VsZWN0ZWQsCiAgICAgICAgICAgICAgICAgICAgICAgIEM6IHJlc3BvbnNlLmRhdGEuZGF0YS5DSXNTZWxlY3RlZCwKICAgICAgICAgICAgICAgICAgICAgICAgRDogcmVzcG9uc2UuZGF0YS5kYXRhLkRJc1NlbGVjdGVkLAogICAgICAgICAgICAgICAgICAgICAgICBFOiByZXNwb25zZS5kYXRhLmRhdGEuRUlzU2VsZWN0ZWQKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkFYSU9TIFBBVElFTlQgREFUQSBFUlJPUjogIiArIGVycm9yKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHZhciBjb250YWlucyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBjdXJyZW50UnR3LnBhdGllbnRJZCA9IHBhdGllbnREYXRhLnBhdGllbnRJZDsKICAgICAgICAgICAgICAgICAgY3VycmVudFJ0dy5taXNjZWxsYW5lb3VzID0gcGF0aWVudERhdGEubWlzY2VsbGFuZW91czsKICAgICAgICAgICAgICAgICAgY3VycmVudFJ0dy5hYmNkZV9zY2hlbWEgPSBwYXRpZW50RGF0YS5hYmNkZV9zY2hlbWE7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGEgb2YgY29udGV4dC5hbWJ1bGFuY2VzV2l0aEVUQXMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFJ0dy5faWQgPT09IGEuX2lkKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb250YWlucyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmICghY29udGFpbnMpIHsKICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmFtYnVsYW5jZXNXaXRoRVRBcy5wdXNoKGN1cnJlbnRSdHcpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YXIgY29udGFpbnMgPSBmYWxzZTsKICAgICAgICAgICAgICBjdXJyZW50UnR3LmV0YSA9ICJGZWhsZXIgYmVpIFJvdXRlbiBTY2huaXR0c3RlbGxlIjsKICAgICAgICAgICAgICBjb250ZXh0LnN0YXRlTWVzc2FnZSA9ICJGZWhsZXIgYmVpIFJvdXRlbiBTY2huaXR0c3RlbGxlIjsKICAgICAgICAgICAgICBmb3IgKHZhciBhIG9mIGNvbnRleHQuYW1idWxhbmNlc1dpdGhFVEFzKSB7CiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFJ0dy5faWQgPT09IGEuX2lkKSB7CiAgICAgICAgICAgICAgICAgIGNvbnRhaW5zID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKCFjb250YWlucykgewogICAgICAgICAgICAgICAgY29udGV4dC5hbWJ1bGFuY2VzV2l0aEVUQXMucHVzaChjdXJyZW50UnR3KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY29udGV4dC5vcGVuUm91dGVFcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgY29udGV4dC4kcm9vdC4kZW1pdCgidG9rZW5TdGF0dXMiLCBjb250ZXh0Lm9wZW5Sb3V0ZUVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgY29uc3QgYm9keSA9IGB7ImxvY2F0aW9ucyI6IFske3RoaXMucnR3TG9jYXRpb25zfV19YDsKICAgICAgICByZXF1ZXN0LnNlbmQoYm9keSk7CiAgICAgIH0KICAgIH0sCiAgICBzZWNUb1RpbWU6IGZ1bmN0aW9uKGV0YUluU2VjKSB7CiAgICAgIGlmICghaXNOYU4oZXRhSW5TZWMpKSB7CiAgICAgICAgY29uc3QgcnR3VGltZVJlZHVjdGlvbkZhY3RvciA9IDAuNzM0OwogICAgICAgIGV0YUluU2VjID0gZXRhSW5TZWMgKiBydHdUaW1lUmVkdWN0aW9uRmFjdG9yOwogICAgICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcihldGFJblNlYyAlIDYwKS50b1N0cmluZygpOwogICAgICAgIHZhciBtaW51dGVzID0gTWF0aC5mbG9vcihldGFJblNlYyAvIDYwKS50b1N0cmluZygpOwogICAgICAgIGlmIChzZWNvbmRzLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgc2Vjb25kcyA9ICIwIiArIHNlY29uZHM7CiAgICAgICAgfQogICAgICAgIHJldHVybiBtaW51dGVzICsgIiBNaW51dGVuICIgKyBzZWNvbmRzICsgIiBTZWt1bmRlbiI7CiAgICAgIH0KICAgIH0sCiAgICBnZXRHbnNzRGF0YTogZnVuY3Rpb24oKSB7CiAgICAgIGZvciAodmFyIHJ0dyBvZiB0aGlzLmFjdGl2ZUFtYnVsYW5jZXMpIHsKICAgICAgICBpZiAocnR3LmFtYnVsYW5jZUlkICYmIHJ0dy5wYXRpZW50SWQgIT0gMCkgewogICAgICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgdXJsOgogICAgICAgICAgICAgICJodHRwczovLzEzNC4xNTUuNDguMjExOjMwMDAvYW1idWxhbmNlL2ZpbmRHbnNzQnlBbWJ1bGFuY2VJZC8iICsKICAgICAgICAgICAgICBydHcuYW1idWxhbmNlSWQKICAgICAgICAgIH07CgogICAgICAgICAgYXhpb3MoY29uZmlnKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzQ29kZSA9PT0gIjEwMDAwIikgewogICAgICAgICAgICAgICAgdGhpcy5ydHdMb2NhdGlvbnMuc3BsaWNlKAogICAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgICBgWyR7cmVzcG9uc2UuZGF0YS5kYXRhLmxvbmdpdHVkZX0sICR7cmVzcG9uc2UuZGF0YS5kYXRhLmxhdGl0dWRlfV1gCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRSdHc7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBjIG9mIHRoaXMuYWN0aXZlQW1idWxhbmNlcykgewogICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5kYXRhLmFtYnVsYW5jZUlkID09PSBjLmFtYnVsYW5jZUlkKSB7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJ0dyA9IGM7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGN1cnJlbnRSdHcubG9uZyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5sb25naXR1ZGU7CiAgICAgICAgICAgICAgICBjdXJyZW50UnR3LmxhdCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5sYXRpdHVkZTsKICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZUVUQShjdXJyZW50UnR3KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgdmFyIGVycm9ySWQgPSBKU09OLnN0cmluZ2lmeShlcnJvci5jb25maWcudXJsLnNsaWNlKC0xKSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAgICAgICAiS2VpbmUgR05TUyBEYXRlbiB2ZXJmw7xnYmFyIGbDvHIgQW1idWxhbmNlSUQ6ICIgKyBlcnJvcklkCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB0aGlzLnN0YXRlTWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KGVycm9yLm1lc3NhZ2UpOwoKICAgICAgICAgICAgICAvL2FkZCBJCiAgICAgICAgICAgICAgZm9yICh2YXIgZWEgb2YgdGhpcy5hY3RpdmVBbWJ1bGFuY2VzKSB7CiAgICAgICAgICAgICAgICBpZiAoYCIke2VhLmFtYnVsYW5jZUlkfSJgID09PSBlcnJvcklkKSB7CiAgICAgICAgICAgICAgICAgIGVhLmV0YSA9ICJLZWluZSBHTlNTIERhdGVuIHZlcmbDvGdiYXIiOwogICAgICAgICAgICAgICAgICB0aGlzLmFtYnVsYW5jZXNXaXRoRVRBcy5wdXNoKGVhKTsKICAgICAgICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24oKSB7CiAgICAvL3RoaXMuZ2V0QXBpS2V5KCk7CiAgICB0aGlzLmdldEduc3NEYXRhKCk7CiAgfSwKICB3YXRjaDogewogICAgYXBpS2V5T3BlblJvdXRlOiB7CiAgICAgIGhhbmRsZXIoKSB7CiAgICAgICAgaWYgKHRoaXMuYXBpS2V5T3BlblJvdXRlLmxlbmd0aCA9PT0gNTYpIHsKICAgICAgICAgIHRoaXMuYXBpQnV0dG9uSXNEaXNhYmxlZCA9IGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmFwaUJ1dHRvbklzRGlzYWJsZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["rtwSelection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"rtwSelection.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"rtw_selection\">\n    <div>\n      <h1>\n        <img\n          style=\"vertical-align: text-top;\"\n          alt=\"Universitätsklinikum Mannheim logo\"\n          src=\"../assets/umm_logo.png\"\n          height=\"50\"\n          width=\"150\"\n        />\n        Universitätsklinikum Mannheim\n      </h1>\n      <div v-if=\"openRouteError\">\n        <i class=\"fas fa-exclamation-triangle\"></i>\n        Der API-Token ist abgelaufen. Bitte updaten.\n        <input size=\"60\" v-model=\"apiKeyOpenRoute\" />\n        <button\n          type=\"button\"\n          id=\"btn-api-key\"\n          class=\"btn btn-primary\"\n          v-on:click=\"updateApiKey\"\n          :disabled=\"apiButtonIsDisabled\"\n        >\n          Update\n        </button>\n        <hr style=\"width: 100%; text-align: left; margin-left: 0;\" />\n      </div>\n      <ul v-if=\"activeAmbulances.length\">\n        <div v-if=\"ambulancesWithETAs.length\">\n          <li\n            v-for=\"ambulance in ambulancesWithETAs\"\n            v-bind:key=\"ambulance.identifier\"\n          >\n            <div v-if=\"ambulance.patientId\">\n              <p>\n                <button @click=\"selectRTW(ambulance)\">\n                  <img src=\"../assets/umm_team_logo.png\" width=\"100\" />\n                  <br />\n                  <br />\n                  RTW - {{ ambulance.identifier }}\n                  <br />\n                  ETA: {{ ambulance.eta }}\n                  <br />\n                  Informationen: {{ ambulance.miscellaneous }}\n                  <br />\n                  <ul>\n                    <li\n                      v-for=\"(value, name) in ambulance.abcde_schema\"\n                      v-bind:key=\"name\"\n                    >\n                      <div class=\"text-center\">\n                        <button\n                          v-if=\"value === false\"\n                          disabled\n                          pill\n                          class=\"rounded-circle notOkABCDE\"\n                        >\n                          {{ name }}\n                        </button>\n                        <button\n                          v-else-if=\"value === true\"\n                          disabled\n                          pill\n                          class=\"rounded-circle okABCDE\"\n                        >\n                          {{ name }}\n                        </button>\n                      </div>\n                    </li>\n                  </ul>\n                </button>\n              </p>\n            </div>\n          </li>\n        </div>\n        <div v-else class=\"d-flex justify-content-center\">\n          <div\n            class=\"spinner-border\"\n            style=\"position: fixed; top: 50%;\"\n            role=\"status\"\n          ></div>\n          <div style=\"position: fixed; top: 55%;\">{{ stateMessage }}</div>\n        </div>\n      </ul>\n      <h3 v-else>... Aktuell fahren keine RTW's das UMM an ...</h3>\n    </div>\n  </div>\n</template>\n\n<script>\nvar axios = require(\"axios\");\n\nexport default {\n  name: \"RtwSelection\",\n  props: {\n    selectRTW: Function,\n    activeAmbulances: Array,\n    inactiveAmbulances: Array,\n    apiKeyOpenRoute: String\n  },\n  data: () => ({\n    arrivalTimes: [],\n    ambulancesWithETAs: [],\n    ambulancesWithNoETA: [],\n    rtwLocations: [`[${8.487255}, ${49.492427}]`],\n    stateMessage: \"Berechne geschätzte Ankunftszeit\",\n    openRouteError: false,\n    apiButtonIsDisabled: true\n  }),\n  methods: {\n    updateApiKey: function() {\n      var context = this;\n      var config = {\n        method: \"put\",\n        //TO CHANGE\n        url: \"https://134.155.48.211:3000/apiKey/update/1\",\n        headers: {},\n        data: {\n          apiKeyId: 1,\n          value: this.apiKeyOpenRoute\n        }\n      };\n\n      axios(config)\n        .then(function(response) {\n          context.openRouteError = false;\n          context.getGnssData();\n          console.log(JSON.stringify(response.data));\n          context.$root.$emit(\"apiToken\", context.apiKeyOpenRoute);\n          context.$root.$emit(\"tokenStatus\", context.openRouteError);\n          context.$forceUpdate;\n        })\n        .catch(function(error) {\n          console.log(error);\n        });\n    },\n    getApiKey: function() {\n      var context = this;\n      var config = {\n        method: \"get\",\n        //TO CHANGE\n        url: \"https://134.155.48.211:3000/apiKey/findAll\",\n        headers: {}\n      };\n\n      axios(config)\n        .then(function(response) {\n          context.apiKeyOpenRoute = response.data.data[0].value;\n          context.$root.$emit(\"apiToken\", context.apiKeyOpenRoute);\n          context.getGnssData();\n        })\n        .catch(function(error) {\n          console.log(error);\n        });\n    },\n    computeETA: function(currentRtw) {\n      let request = new XMLHttpRequest();\n      if (this.rtwLocations.length > 1) {\n        request.open(\n          \"POST\",\n          \"https://api.openrouteservice.org/v2/matrix/driving-car\"\n        );\n\n        request.setRequestHeader(\n          \"Accept\",\n          \"application/json, application/geo+json, application/gpx+xml, img/png; charset=utf-8\"\n        );\n        request.setRequestHeader(\"Content-Type\", \"application/json\");\n        request.setRequestHeader(\"Authorization\", this.apiKeyOpenRoute);\n        let context = this;\n        request.onreadystatechange = function() {\n          if (request.readyState === 4) {\n            if (request.status === 200) {\n              currentRtw.eta = context.secToTime(\n                JSON.parse(request.responseText).durations[1][0]\n              );\n              context.stateMessage = \"ETA wurde berechnet\";\n              // After computing the ETA, the patient miscellaneous informations (50 first characters of the miscellaneous)\n              // and ABCDE Schema is fetched from the server.\n              let config = {\n                method: \"get\",\n                url:\n                  \"https://134.155.48.211:3000/patient/findByAmbulanceId/\" +\n                  currentRtw.ambulanceId\n              };\n              var patientData = {};\n              axios(config)\n                .then(response => {\n                  if (response.data.statusCode === \"10000\") {\n                    patientData = {\n                      patientId: response.data.data.patientId,\n                      miscellaneous: response.data.data.miscellaneous.slice(\n                        0,\n                        50\n                      ),\n                      abcde_schema: {\n                        A: response.data.data.AIsSelected,\n                        B: response.data.data.BIsSelected,\n                        C: response.data.data.CIsSelected,\n                        D: response.data.data.DIsSelected,\n                        E: response.data.data.EIsSelected\n                      }\n                    };\n                  }\n                })\n                .catch(error => {\n                  console.log(\"AXIOS PATIENT DATA ERROR: \" + error);\n                })\n                .then(() => {\n                  var contains = false;\n                  currentRtw.patientId = patientData.patientId;\n                  currentRtw.miscellaneous = patientData.miscellaneous;\n                  currentRtw.abcde_schema = patientData.abcde_schema;\n                  for (var a of context.ambulancesWithETAs) {\n                    if (currentRtw._id === a._id) {\n                      contains = true;\n                    }\n                  }\n                  if (!contains) {\n                    context.ambulancesWithETAs.push(currentRtw);\n                  }\n                });\n            } else {\n              var contains = false;\n              currentRtw.eta = \"Fehler bei Routen Schnittstelle\";\n              context.stateMessage = \"Fehler bei Routen Schnittstelle\";\n              for (var a of context.ambulancesWithETAs) {\n                if (currentRtw._id === a._id) {\n                  contains = true;\n                }\n              }\n              if (!contains) {\n                context.ambulancesWithETAs.push(currentRtw);\n              }\n              context.openRouteError = true;\n              context.$root.$emit(\"tokenStatus\", context.openRouteError);\n            }\n          }\n        };\n        const body = `{\"locations\": [${this.rtwLocations}]}`;\n        request.send(body);\n      }\n    },\n    secToTime: function(etaInSec) {\n      if (!isNaN(etaInSec)) {\n        const rtwTimeReductionFactor = 0.734;\n        etaInSec = etaInSec * rtwTimeReductionFactor;\n        var seconds = Math.floor(etaInSec % 60).toString();\n        var minutes = Math.floor(etaInSec / 60).toString();\n        if (seconds.length === 1) {\n          seconds = \"0\" + seconds;\n        }\n        return minutes + \" Minuten \" + seconds + \" Sekunden\";\n      }\n    },\n    getGnssData: function() {\n      for (var rtw of this.activeAmbulances) {\n        if (rtw.ambulanceId && rtw.patientId != 0) {\n          let config = {\n            method: \"get\",\n            url:\n              \"https://134.155.48.211:3000/ambulance/findGnssByAmbulanceId/\" +\n              rtw.ambulanceId\n          };\n\n          axios(config)\n            .then(response => {\n              if (response.data.statusCode === \"10000\") {\n                this.rtwLocations.splice(\n                  1,\n                  1,\n                  `[${response.data.data.longitude}, ${response.data.data.latitude}]`\n                );\n                var currentRtw;\n                for (var c of this.activeAmbulances) {\n                  if (response.data.data.ambulanceId === c.ambulanceId) {\n                    currentRtw = c;\n                  }\n                }\n                currentRtw.long = response.data.data.longitude;\n                currentRtw.lat = response.data.data.latitude;\n                this.computeETA(currentRtw);\n              }\n            })\n            .catch(error => {\n              var errorId = JSON.stringify(error.config.url.slice(-1));\n              console.log(\n                \"Keine GNSS Daten verfügbar für AmbulanceID: \" + errorId\n              );\n              this.stateMessage = JSON.stringify(error.message);\n\n              //add I\n              for (var ea of this.activeAmbulances) {\n                if (`\"${ea.ambulanceId}\"` === errorId) {\n                  ea.eta = \"Keine GNSS Daten verfügbar\";\n                  this.ambulancesWithETAs.push(ea);\n                  this.$forceUpdate();\n                }\n              }\n            });\n        }\n      }\n    }\n  },\n  mounted: function() {\n    //this.getApiKey();\n    this.getGnssData();\n  },\n  watch: {\n    apiKeyOpenRoute: {\n      handler() {\n        if (this.apiKeyOpenRoute.length === 56) {\n          this.apiButtonIsDisabled = false;\n        } else {\n          this.apiButtonIsDisabled = true;\n        }\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\nh1 {\n  margin: 5px 0 40px;\n}\nh3 {\n  margin: 100px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 5px;\n}\nli {\n  display: inline-block;\n  margin: 5px 5px;\n}\n.okABCDE {\n  background-color: green;\n  color: white;\n}\n.notOkABCDE {\n  background-color: red;\n  color: white;\n}\n</style>\n"]}]}